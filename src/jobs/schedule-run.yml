description: >
  Clone test project and schedule e2e automated run on Testlio platform.

executor: default

parameters:
  dir:
    type: string
    default: "test-project"
    description: "Select the path to test project sources."
  token:
    type: string
    default: "TESTLIO_RUN_API_TOKEN"
    description: |
      Enter the name of the environment variable containing the Testlio Run API token to be used for authentication.
  attach-workspace:
    type: boolean
    default: false
    description: |
      Boolean for whether or not to attach to an existing workspace. Default is false.
steps:
  - when:
      condition: << parameters.attach-workspace >>
      steps:
        â€” attach_workspace:
          at: ~/
  - install
  - package:
      dir: << parameters.dir >>
  - create-run:
      token: << parameters.token >>
